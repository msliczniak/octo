#  dd bs=256 skip=1 if=~/Downloads/output.ch8 of=output.c8x && rm -f ~/Downloads/output.ch8

: main
jump init

:org 0x300
: init

i := code
load v3

i := 0x2b0
save v3

v1 := 0xe
i := 0x2c0
save v3

v1 := 8
v2 := 16
v3 := 24
v4 := 32
v5 := 40
v6 := 48

v7 := 10
v8 := 25
v9 := 40

i := line
v0 := 55
sprite v1 v0 1
sprite v2 v0 1
sprite v3 v0 1
sprite v4 v0 1
sprite v5 v0 1
sprite v6 v0 1

i := shroom0-00
sprite v1 v7 15
i := shroom0-01
sprite v2 v7 15
i := shroom0-02
sprite v3 v7 15
i := shroom0-03
sprite v4 v7 15
i := shroom0-04
sprite v5 v7 15
i := shroom0-05
sprite v6 v7 15

i := shroom0-06
sprite v1 v8 15
i := shroom0-07
sprite v2 v8 15
i := shroom0-08
sprite v3 v8 15
i := shroom0-09
sprite v4 v8 15
i := shroom0-10
sprite v5 v8 15
i := shroom0-11
sprite v6 v8 15

i := shroom0-12
sprite v1 v9 15
i := shroom0-13
sprite v2 v9 15
i := shroom0-14
sprite v3 v9 15
i := shroom0-15
sprite v4 v9 15
i := shroom0-16
sprite v5 v9 15
i := shroom0-17
sprite v6 v9 15

v0 := 255

: forever
#jump forever

#delay := v0
#: repeat0
#vf := delay
#if vf == 255 then jump repeat0

# alternate page
0x02 0xb0

#delay := v0
#: repeat1
#vf := delay
#if vf == 255 then jump repeat1

# initial page
0x02 0xc0

jump forever

: line
255

# $ ./slice.sh shroom0
# $ for i in shroom0-*[01]?.pbm; do echo ': '`basename $i .pbm`; tail -15 "$i" | tr -d ' ' | sed 's/^/0b/'; echo; done
: shroom0-00
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000111
0b00000111
0b00000111
0b00000111
0b00000111
0b00000111

: shroom0-01
0b00000000
0b00000000
0b00000000
0b00011111
0b00011111
0b00011111
0b11100000
0b11100000
0b11100000
0b00000011
0b00000011
0b00000011
0b00011111
0b00011111
0b00011111

: shroom0-02
0b01111111
0b01111111
0b01111111
0b11111111
0b11111111
0b11111111
0b01111111
0b01111111
0b01111111
0b11111111
0b11111111
0b11111111
0b10000000
0b10000000
0b10000000

: shroom0-03
0b11111111
0b11111111
0b11111111
0b11111000
0b11111000
0b11111000
0b11111000
0b11111000
0b11111000
0b11111111
0b11111111
0b11111111
0b00000111
0b00000111
0b00000111

: shroom0-04
0b11100000
0b11100000
0b11100000
0b00011111
0b00011111
0b00011111
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b11100000
0b11100000
0b11100000

: shroom0-05
0b00000001
0b00000001
0b00000001
0b10000001
0b10000001
0b10000001
0b01110001
0b01110001
0b01110001
0b00001111
0b00001111
0b00001111
0b00001111
0b00001111
0b00001111

: shroom0-06
0b00111111
0b00111111
0b00111111
0b00111111
0b00111111
0b00111111
0b00111000
0b00111000
0b00111000
0b00111000
0b00111000
0b00111000
0b00111000
0b00111000
0b00111000

: shroom0-07
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b00011111
0b00011111
0b00011111
0b00011111
0b00011111
0b00011111

: shroom0-08
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b10000000
0b10000000
0b10000000
0b11111111
0b11111111
0b11111111

: shroom0-09
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000111
0b00000111
0b00000111
0b11111111
0b11111111
0b11111111

: shroom0-10
0b11111111
0b11111111
0b11111111
0b11111100
0b11111100
0b11111100
0b11100000
0b11100000
0b11100000
0b11100000
0b11100000
0b11100000
0b11111100
0b11111100
0b11111100

: shroom0-11
0b11111111
0b11111111
0b11111111
0b00001111
0b00001111
0b00001111
0b00000001
0b00000001
0b00000001
0b00000001
0b00000001
0b00000001
0b00001111
0b00001111
0b00001111

: shroom0-12
0b00111000
0b00111000
0b00111000
0b00000111
0b00000111
0b00000111
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroom0-13
0b11111111
0b11111111
0b11111111
0b11111100
0b11111100
0b11111100
0b11100000
0b11100000
0b11100000
0b11100000
0b11100000
0b11100000
0b00011100
0b00011100
0b00011100

: shroom0-14
0b11111111
0b11111111
0b11111111
0b00001110
0b00001110
0b00001110
0b00001110
0b00001110
0b00001110
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroom0-15
0b11111111
0b11111111
0b11111111
0b00000111
0b00000111
0b00000111
0b00000111
0b00000111
0b00000111
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroom0-16
0b11111111
0b11111111
0b11111111
0b00000011
0b00000011
0b00000011
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000011
0b00000011
0b00000011

: shroom0-17
0b11111111
0b11111111
0b11111111
0b11111111
0b11111111
0b11111111
0b01110001
0b01110001
0b01110001
0b01110001
0b01110001
0b01110001
0b10000001
0b10000001
0b10000001

# $ convert shroom0.pbm shroom1.pbm -compose Darken -composite -compress None -strip shroomx.pbm
# $ ./slice.sh shroomx
# $ for i in shroomx-*[01]?.pbm; do echo ': '`basename $i .pbm`; tail -15 "$i" | tr -d ' ' | sed 's/^/0b/'; echo; done
: shroomx-00
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroomx-01
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000011
0b00000011
0b00000011
0b00011111
0b00011111
0b00011111

: shroomx-02
0b00000000
0b00000000
0b00000000
0b01111111
0b01111111
0b01111111
0b01111111
0b01111111
0b01111111
0b11111111
0b11111111
0b11111111
0b10000000
0b10000000
0b10000000

: shroomx-03
0b00000000
0b00000000
0b00000000
0b11111000
0b11111000
0b11111000
0b11111000
0b11111000
0b11111000
0b11111111
0b11111111
0b11111111
0b00000111
0b00000111
0b00000111

: shroomx-04
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b11100000
0b11100000
0b11100000

: shroomx-05
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroomx-06
0b00000111
0b00000111
0b00000111
0b00000111
0b00000111
0b00000111
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroomx-07
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b11111100
0b00011111
0b00011111
0b00011111
0b00011111
0b00011111
0b00011111

: shroomx-08
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b10000000
0b10000000
0b10000000
0b11111111
0b11111111
0b11111111

: shroomx-09
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000111
0b00000111
0b00000111
0b11111111
0b11111111
0b11111111

: shroomx-10
0b11111111
0b11111111
0b11111111
0b11111100
0b11111100
0b11111100
0b11100000
0b11100000
0b11100000
0b11100000
0b11100000
0b11100000
0b11111100
0b11111100
0b11111100

: shroomx-11
0b11111110
0b11111110
0b11111110
0b00001110
0b00001110
0b00001110
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00001110
0b00001110
0b00001110

: shroomx-12
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroomx-13
0b11111100
0b11111100
0b11111100
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroomx-14
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroomx-15
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroomx-16
0b00000011
0b00000011
0b00000011
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: shroomx-17
0b11111110
0b11111110
0b11111110
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000
0b00000000

: code
# alternate page
0xf8 0xb	# LDI
0xbb			# PHI RB
0xd4			# SEP R4

:org 0xa00
0b10000000 0 0 0 0 0 0 0
 0b1000000 0 0 0 0 0 0 0
  0b100000 0 0 0 0 0 0 0
   0b10000 0 0 0 0 0 0 0
    0b1000 0 0 0 0 0 0 0
     0b100 0 0 0 0 0 0 0
      0b10 0 0 0 0 0 0 0
       0b1 0 0 0 0 0 0 0

0 0b10000000 0 0 0 0 0 0
0  0b1000000 0 0 0 0 0 0
0   0b100000 0 0 0 0 0 0
0    0b10000 0 0 0 0 0 0
0     0b1000 0 0 0 0 0 0
0      0b100 0 0 0 0 0 0
0       0b10 0 0 0 0 0 0
0        0b1 0 0 0 0 0 0

0 0 0b10000000 0 0 0 0 0
0 0  0b1000000 0 0 0 0 0
0 0   0b100000 0 0 0 0 0
0 0    0b10000 0 0 0 0 0
0 0     0b1000 0 0 0 0 0
0 0      0b100 0 0 0 0 0
0 0       0b10 0 0 0 0 0
0 0        0b1 0 0 0 0 0

0 0 0 0b10000000 0 0 0 0 
0 0 0  0b1000000 0 0 0 0
0 0 0   0b100000 0 0 0 0
0 0 0    0b10000 0 0 0 0
0 0 0     0b1000 0 0 0 0
0 0 0      0b100 0 0 0 0
0 0 0       0b10 0 0 0 0
0 0 0        0b1 0 0 0 0

0 0 0 0 0b10000000 0 0 0
0 0 0 0  0b1000000 0 0 0
0 0 0 0   0b100000 0 0 0
0 0 0 0    0b10000 0 0 0
0 0 0 0     0b1000 0 0 0
0 0 0 0      0b100 0 0 0
0 0 0 0       0b10 0 0 0
0 0 0 0        0b1 0 0 0
        
0 0 0 0 0 0b10000000 0 0
0 0 0 0 0  0b1000000 0 0
0 0 0 0 0   0b100000 0 0
0 0 0 0 0    0b10000 0 0
0 0 0 0 0     0b1000 0 0
0 0 0 0 0      0b100 0 0
0 0 0 0 0       0b10 0 0
0 0 0 0 0        0b1 0 0
        
0 0 0 0 0 0 0b10000000 0
0 0 0 0 0 0  0b1000000 0
0 0 0 0 0 0   0b100000 0
0 0 0 0 0 0    0b10000 0
0 0 0 0 0 0     0b1000 0
0 0 0 0 0 0      0b100 0
0 0 0 0 0 0       0b10 0
0 0 0 0 0 0        0b1 0
        
0 0 0 0 0 0 0 0b10000000 
0 0 0 0 0 0 0  0b1000000
0 0 0 0 0 0 0   0b100000
0 0 0 0 0 0 0    0b10000
0 0 0 0 0 0 0     0b1000
0 0 0 0 0 0 0      0b100
0 0 0 0 0 0 0       0b10
0 0 0 0 0 0 0        0b1
